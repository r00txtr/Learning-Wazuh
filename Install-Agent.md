# Installing & Configuring Wazuh Agent: A Beginner's Guide

Wazuh is a powerful open-source security monitoring platform that offers comprehensive protection for your IT infrastructure. It includes various components such as the Wazuh Indexer, Server, Dashboard, and Agents. In this guide, we'll focus on installing and configuring the Wazuh Agent, which is responsible for collecting and sending security data from monitored systems to the Wazuh Server.

### Understanding Wazuh Components

Before we dive into the installation process, it's important to understand the key components of the Wazuh platform:

1. **Wazuh Indexer**:
   - The Indexer is based on Elasticsearch and is responsible for storing and searching the data collected by Wazuh Agents. It processes the logs, alerts, and other data for quick retrieval and analysis.

2. **Wazuh Server**:
   - The Server is the brain of the Wazuh platform. It analyzes the data received from the Agents, generates alerts, and manages rules. The Server communicates with the Indexer and Dashboard to provide real-time insights.

3. **Wazuh Dashboard**:
   - The Dashboard is a web interface that allows users to visualize and manage security events. It provides real-time monitoring, dashboards, and reports based on the data stored in the Indexer.

4. **Wazuh Agents**:
   - Agents are installed on the endpoints you wish to monitor (e.g., servers, workstations). They collect data such as logs, file integrity, and vulnerability information, and send it to the Wazuh Server for analysis.

### Step-by-Step Installation of Wazuh Agent

Now that you have a basic understanding of the Wazuh components, let’s proceed with installing and configuring the Wazuh Agent on a Linux system.

#### Step 1: Download and Install the Wazuh Agent

1. **Download the Wazuh Agent Package**:

   Open a terminal on the endpoint where you want to install the Wazuh Agent and run the following command:

   ```bash
   wget https://packages.wazuh.com/4.x/apt/pool/main/w/wazuh-agent/wazuh-agent_4.8.2-1_amd64.deb
   ```

   This command downloads the Wazuh Agent package for your system.

2. **Install the Wazuh Agent**:

   Once the download is complete, install the agent using the following command. Replace `192.168.1.8` with the IP address of your Wazuh Server, and `Agent-01-marlinspike` with a unique name for your agent:

   ```bash
   sudo WAZUH_MANAGER='192.168.1.8' WAZUH_AGENT_NAME='Agent-01-marlinspike' dpkg -i ./wazuh-agent_4.8.2-1_amd64.deb
   ```

   This command installs the Wazuh Agent and configures it to communicate with your Wazuh Server.

#### Step 2: Configure and Start the Wazuh Agent

After installing the agent, you'll need to enable and start the service.

1. **Reload the Systemd Daemon**:

   ```bash
   sudo systemctl daemon-reload
   ```

   This command ensures that the system recognizes the new Wazuh Agent service.

2. **Enable the Wazuh Agent**:

   ```bash
   sudo systemctl enable wazuh-agent
   ```

   Enabling the agent ensures that it starts automatically when the system boots.

3. **Start the Wazuh Agent**:

   ```bash
   sudo systemctl start wazuh-agent
   ```

   This command starts the Wazuh Agent service, which will begin monitoring the system and sending data to the Wazuh Server.

### Step 3: Verifying the Wazuh Agent Installation

After starting the Wazuh Agent, you should verify that it is correctly installed and communicating with the Wazuh Server.

1. **Check the Agent Status**:

   ```bash
   sudo systemctl status wazuh-agent
   ```

   This command displays the current status of the Wazuh Agent service. You should see an output indicating that the agent is active and running.

2. **Verify Communication with the Server**:

   To ensure that the agent is successfully communicating with the Wazuh Server, log in to the Wazuh Dashboard and navigate to the "Agents" tab. You should see your newly installed agent (`Agent-01-marlinspike`) listed and reporting data.

### Step 4: Testing the Wazuh Agent

To see the Wazuh Agent in action, you can simulate an attack and monitor the alerts generated by the Wazuh Server.

1. **Simulate an SSH Brute-Force Attack**:

   You can use a tool like Hydra to perform a brute-force attack on an SSH server. Replace `192.168.1.10` with the IP address of a target system:

   ```bash
   hydra -l marlinspike -P passlist.txt ssh://192.168.1.10
   ```

   This command attempts to log in to the SSH server using a list of passwords in `passlist.txt`.

2. **Monitor the Alerts**:

   After running the attack, check the Wazuh Dashboard for new alerts. The Wazuh Server should detect the brute-force attempt and generate an alert that you can review in the Dashboard.

### Conclusion

Installing and configuring the Wazuh Agent is a crucial step in securing your IT infrastructure. By following this guide, you’ve successfully set up a Wazuh Agent, connected it to your Wazuh Server, and verified its operation. This setup will help you monitor and protect your endpoints by providing real-time alerts and security insights.

If you found this guide helpful, consider exploring additional features of Wazuh, such as file integrity monitoring, vulnerability detection, and compliance management. Stay secure and keep monitoring!
